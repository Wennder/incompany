<?phpclass SiteController extends AppController {    public $uses = array(        "site_paginas", "rh_funcionarios"    );    public $layout = "login";    public function index() {        if (!empty($this->data)) {            $this->AuthComponent->login($this->data);            $this->set("enviado", true);        }    }    public function pagina($tituloId) {        $condicao = array("conditions" => array(                "titulo_id" => $tituloId                ));        $this->set("conteudo", $this->site_paginas->first($condicao));    }    public function logout() {        $where = "delete from sys_online where id_user = " . $this->AuthComponent->user('id') . "";        $this->rh_funcionarios->fetch($where);        $this->AuthComponent->logout();    }    public function cadastrarSenha() {        if (!empty($this->data)) {            if (!empty($this->data["username"])) {                $whereVerifica = array(                    "conditions" => array(                        "username" => $this->data["username"]                    )                );                $fetchEmail = $this->rh_funcionarios->first($whereVerifica);                if (!empty($fetchEmail["username"])) {                    //Verifica se a senha está vazia                    if ($fetchEmail["password"] == "73d5633a9b6f978a5f23acdf403782b709b00584" || empty($fetchEmail["password"])) {                        $this->data["id"] = $fetchEmail["id"];                        if ($this->rh_funcionarios->save($this->data)) {                            $this->set("mensagens", "Senha cadastrada com sucesso.");                            $this->redirect($this->AuthComponent->loginAction);                        } else {                            $this->set("mensagens", "Houve um problema na sua requisição, tente novamente.");                        }                    } else {                        $this->set("mensagens", "Sua senha já foi cadastrada préviamente, caso esse seja seu primeiro acesso, entre em contato com o gestor do Sistema.");                    }                } else {                    $this->set("mensagens", "Email não encontrado no cadastro dos funcionários");                }            } else {                $this->set("mensagens", "Email não encontrado no cadastro dos funcionários");            }        }    }}?>